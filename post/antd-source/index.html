<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"screw-hand.com","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.17.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":"default","style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="导读github上面有一些很“哇塞”的项目，在工作中呢，我们只是作为“使用者”的角色，去把这些开源项目应用在项目中。看着官网提供的资料，了解了这是什么、这怎么安装、这怎么使用、这有什么东西……这很常见，从使用者的角度上看，甚至社区上的项目写得好不好跟我们关系也不大。“能用就用，不能用就换一个，反正有很多选择”，这是很多人使用者的态度。这当然没问题。不过作为研发人员，我们可以不止步于此，可以进一步深">
<meta property="og:type" content="article">
<meta property="og:title" content="antd源码浅析">
<meta property="og:url" content="https://screw-hand.com/post/antd-source/index.html">
<meta property="og:site_name" content="螺丝手">
<meta property="og:description" content="导读github上面有一些很“哇塞”的项目，在工作中呢，我们只是作为“使用者”的角色，去把这些开源项目应用在项目中。看着官网提供的资料，了解了这是什么、这怎么安装、这怎么使用、这有什么东西……这很常见，从使用者的角度上看，甚至社区上的项目写得好不好跟我们关系也不大。“能用就用，不能用就换一个，反正有很多选择”，这是很多人使用者的态度。这当然没问题。不过作为研发人员，我们可以不止步于此，可以进一步深">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://screw-hand.com/post/antd-source/ant.design_index-cn.png">
<meta property="og:image" content="https://screw-hand.com/post/antd-source/ant.design_docs_react_introduce-cn.png">
<meta property="og:image" content="https://screw-hand.com/post/antd-source/antd-init.png">
<meta property="og:image" content="https://screw-hand.com/post/antd-source/ant.design_components_overview-cn_.png">
<meta property="og:image" content="https://screw-hand.com/post/antd-source/github.com_ant-design_ant-design_.png">
<meta property="og:image" content="https://screw-hand.com/post/antd-source/github.com_ant-design_ant-design_clone.png">
<meta property="og:image" content="https://screw-hand.com/post/antd-source/github.com_ant-design_ant-design_release_2.png">
<meta property="og:image" content="https://screw-hand.com/post/antd-source/github.com_ant-design_ant-design_branch.png">
<meta property="og:image" content="https://screw-hand.com/post/antd-source/github.com_ant-design_ant-design_button_1.png">
<meta property="og:image" content="https://screw-hand.com/post/antd-source/ant.design_button.png">
<meta property="article:published_time" content="2022-08-02T07:47:16.000Z">
<meta property="article:modified_time" content="2024-03-17T09:23:22.648Z">
<meta property="article:author" content="screw-hand">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://screw-hand.com/post/antd-source/ant.design_index-cn.png">


<link rel="canonical" href="https://screw-hand.com/post/antd-source/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://screw-hand.com/post/antd-source/","path":"/post/antd-source/","title":"antd源码浅析"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>antd源码浅析 | 螺丝手</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="螺丝手" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">螺丝手</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AF%BC%E8%AF%BB"><span class="nav-number">1.</span> <span class="nav-text">导读</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%80%9A%E8%AF%86"><span class="nav-number">2.</span> <span class="nav-text">通识</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%9D%E8%AF%86"><span class="nav-number">3.</span> <span class="nav-text">初识</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8F%E8%A7%88%E5%AE%98%E7%BD%91"><span class="nav-number">3.1.</span> <span class="nav-text">浏览官网</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9D%E7%94%A8"><span class="nav-number">3.2.</span> <span class="nav-text">初用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E5%A4%9A%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="nav-number">3.3.</span> <span class="nav-text">更多的信息</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%9D%E7%AA%A5"><span class="nav-number">4.</span> <span class="nav-text">初窥</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%BA%90%E7%A0%81"><span class="nav-number">4.1.</span> <span class="nav-text">获取源码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%88%E6%9C%AC"><span class="nav-number">4.2.</span> <span class="nav-text">版本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B9%E7%9B%AE%E5%BD%95%E5%88%86%E6%9E%90"><span class="nav-number">4.3.</span> <span class="nav-text">根目录分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E8%B5%B7%E7%82%B9"><span class="nav-number">4.4.</span> <span class="nav-text">项目起点</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE"><span class="nav-number">5.</span> <span class="nav-text">启动项目</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B0%83%E8%AF%95%E4%BB%A3%E7%A0%81"><span class="nav-number">5.1.</span> <span class="nav-text">调试代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8C%85%E5%88%AB%E5%90%8D"><span class="nav-number">5.2.</span> <span class="nav-text">包别名</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BD%93%E7%B3%BB%E5%AE%B6%E6%97%8F"><span class="nav-number">6.</span> <span class="nav-text">体系家族</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%9D%E5%BF%83"><span class="nav-number">7.</span> <span class="nav-text">初心</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="screw-hand"
      src="/avatar.jpg">
  <p class="site-author-name" itemprop="name">screw-hand</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">37</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/screw-hand" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;screw-hand" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:screwhand0@gmail.com" title="E-Mail → mailto:screwhand0@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml" rel="noopener me"><i class="fa fa-rss fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://screw-hand.com/post/antd-source/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/avatar.jpg">
      <meta itemprop="name" content="screw-hand">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="螺丝手">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="antd源码浅析 | 螺丝手">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          antd源码浅析
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-08-02 15:47:16" itemprop="dateCreated datePublished" datetime="2022-08-02T15:47:16+08:00">2022-08-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-03-17 17:23:22" itemprop="dateModified" datetime="2024-03-17T17:23:22+08:00">2024-03-17</time>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/post/antd-source/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="/post/antd-source/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>10k</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="导读"><a href="#导读" class="headerlink" title="导读"></a>导读</h1><p>github上面有一些很“哇塞”的项目，在工作中呢，我们只是作为“使用者”的角色，去把这些开源项目应用在项目中。<br>看着官网提供的资料，了解了这是什么、这怎么安装、这怎么使用、这有什么东西……<br>这很常见，从使用者的角度上看，甚至社区上的项目写得好不好跟我们关系也不大。<br>“能用就用，不能用就换一个，反正有很多选择”，这是很多人使用者的态度。<br>这当然没问题。<br>不过作为研发人员，我们可以不止步于此，可以进一步深入了解他们的项目代码。<br>毕竟作者都开源了，肯定是希望社区上的用户能对他们的代码有更多的了解。<br>开源给了所有技术人员一个机会——了解其他优秀开发者的项目机会。<br>遗憾的是大部分开发者都不具备去独立分析一个开源项目的方法。<br>看到优秀的项目代码，常常没办法搞懂整体设计、功能代码，想了解其实现也望而止步。</p>
<p><strong>这是一个系列，以Ant Design UI（react）为示例，一起学习如何分析一个开源项目。</strong></p>
<span id="more"></span>

<h1 id="通识"><a href="#通识" class="headerlink" title="通识"></a>通识</h1><p>从“编译层”的维度看（排序：底层依赖-&gt;高层实现），大概分成这几个领域：</p>
<ol>
<li>机器码</li>
<li>编程语言</li>
<li>语言框架</li>
<li>代码项目</li>
<li>项目依赖</li>
<li>项目插件</li>
<li>……</li>
</ol>
<p>从项目类型的维度（排序：从难到易）大致可以分为：</p>
<ol>
<li>编程语言</li>
<li>语言框架</li>
<li>开源软件</li>
<li>框架&#x2F;类库</li>
<li>框架&#x2F;类库的插件</li>
<li>业务项目（demo）</li>
<li>文档资料</li>
</ol>
<blockquote>
<p>只是粗略的分类，或许你有比我更好的分层方式；而且也不是固定的，比如有些开源项目，本身就是一个语言框架，那他可能就根本没有依赖其他语言框架，所有没有3也是正常的。</p>
</blockquote>
<p><strong>编译层和项目类型可以为我们快速定位一个开源项目的信息，以及是否值得你去分析；<br>还有难易度，是否自己满足前置技能有分析其代码的能力。</strong></p>
<p>比如“文档资料”是最没分析价值的，或许是文档的排版格式很漂亮，自己也想搞个很漂亮的文档页面；<br>那应该得去看这个文档是用什么东西生成的，关注点就应该转移到这个文档生成框架了（“开源软件&#x2F;框架&#x2F;类库”）。</p>
<p>虽然我们是以Ant Design——一个ts语言、react框架（这里提前泄漏信息了，在没开始看资料前，应该是不知道这些信息的）的ui库为示例。</p>
<p>比如<a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot">Spring Boot</a>，是用<code>Java</code>写的，那么要去分析<code>Spring Boot</code>。<br>前置条件是熟悉<code>Java</code>语法，以及对相关领域（网络请求、http、api、数据库操作）有所概念。<br>而<a target="_blank" rel="noopener" href="https://www.djangoproject.com/">Django</a>是用<code>Python</code>的写的，分析前也同样要对相关的编程语言、<br>以及相关领域（同<code>Spring Boot</code>，因为它们都可以用于web开发）有所概念。<br>甚至是需要确切的用过<code>Spring Boot</code>、<code>Django</code>开发过项目。<br><strong>强烈推荐在分析开源代码前，本身得作为“使用者”使用过这些代码有实际的运用，哪怕是最简单的运用。</strong></p>
<blockquote>
<p>所以这是一篇通用性非常强的文章，基本上拿到任何源码项目，都可以按照此文的套路进行粗略分析。</p>
</blockquote>
<h1 id="初识"><a href="#初识" class="headerlink" title="初识"></a>初识</h1><blockquote>
<p>写过完全没用过and的读者，如果用antd开发过项目，可以选择跳过此章节。从<a href="#%E5%88%9D%E7%AA%A5">初窥</a>继续。</p>
</blockquote>
<ul>
<li>官方网站：<a target="_blank" rel="noopener" href="https://ant.design/index-cn">https://ant.design/index-cn</a></li>
<li>源码地址：<a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design/">https://github.com/ant-design/ant-design/</a></li>
</ul>
<p>如果之前用过Ant Design，也请忘记掉跟它相关的一切；<br>现在我们仅有的是的一个源码地址、官方网站而已。</p>
<p><strong>先了解一下它是什么，能做什么，怎么安装，怎么使用。</strong></p>
<h2 id="浏览官网"><a href="#浏览官网" class="headerlink" title="浏览官网"></a>浏览官网</h2><p>先看官网，官网的首页一般都是一些“正确的废话”，很多时候并不能得到有实际作用的信息；<br>最顶部的菜单：<code>设计  文档 组件 资源 国内镜像 ……</code>，这些有很大的信息量，先不看；<br>最底部的脚页：<code>相关资源 社区 帮助 更多产品</code> 四大板块，都是外部链接，也先不看；</p>
<p><img src="/post/antd-source/ant.design_index-cn.png"></p>
<p> 首页有个很明显的“开始使用按钮”，是专门写给使用者的，我们要第一个要看的是这个。</p>
<p><img src="/post/antd-source/ant.design_docs_react_introduce-cn.png"></p>
<p>这个页面就有很多有效的信息量了，但是表述还是太过官网，个人理解可以用接地点的方法，稍微提取一些：</p>
<ol>
<li>React UI 组件库（是什么）</li>
<li>用来做中后台产品（能做什么）</li>
<li>开箱即用</li>
<li>用<code>TypeScript</code>写的</li>
<li>多语言支持</li>
<li>支持主题定制</li>
<li>最少兼容IE11</li>
<li>支持ssr</li>
<li>也能被Electron使用</li>
<li>用npm、yarn安装 &#x2F; 浏览器引入 &#x2F; 按需加载 （什么安装）</li>
<li>【简单示例 - 见上图】(怎么使用)</li>
</ol>
<p>那么“它是什么，能做什么，怎么安装，怎么使用”，其实都知道了，这个时候也要知道使用antd的一些前置条件：</p>
<ol>
<li>React</li>
<li>Typescript&#x2F;JavaScritpt</li>
<li>npm</li>
</ol>
<p><strong>这也是antd对使用者的前置技能要求，若是不了解，建议先学好前置技能。</strong></p>
<p><em><code>链接、谁在使用、如何贡献、社区互助</code>：次要信息，不需要关注。</em></p>
<p>上图右侧边栏是文档用于文章章节定位；<br>左侧是导航菜单，看完了此页面（Ant Design of React）就继续往下看；<br>把整个文档完整看一遍；<br>可以快速阅读，但不要跳过任何章节。</p>
<h2 id="初用"><a href="#初用" class="headerlink" title="初用"></a>初用</h2><p>或许在上一章的时候，你已经跟着文档搭建，启动了一个antd的项目；<br>文档提供了好几种方法（浏览器引入、create-react-app、create-react-app+typescript、umi）。<br>这里用官网提供的<a target="_blank" rel="noopener" href="https://ant.design/docs/react/use-in-typescript-cn">create-react-app+typescript</a>方式搭建；<br><em><code>高级配置</code> 暂时用不上，跳过。</em></p>
<p>一切顺利的话，我们会在localhost:3000看到一个蓝色的按钮。</p>
<p><img src="/post/antd-source/antd-init.png"></p>
<p><a target="_blank" rel="noopener" href="https://github.com/screw-hand/demo-fragment/commit/667ffb13bcc716c16fefdb34247c39eb671ab292">项目提交链接</a></p>
<h2 id="更多的信息"><a href="#更多的信息" class="headerlink" title="更多的信息"></a>更多的信息</h2><p>把关注点放到官网的“最顶部的菜单”：<code>设计 文档 组件 资源 国内镜像 ……</code>。<br>其实在<a href="##%E5%88%9D%E7%94%A8">初用</a>那一章，我们就已经把“文档”模块给看完了；<br><code>设计 资源 国内镜像 </code>，这几个点进去一看，<br>没看到有关的使用信息，还是没必要看；<br>而<code>组件</code>模块，才是antd最核心的教程；</p>
<p><img src="/post/antd-source/ant.design_components_overview-cn_.png"></p>
<p>把所有的组件都过一遍，试着在刚才的demo进行一些实例试用。</p>
<h1 id="初窥"><a href="#初窥" class="headerlink" title="初窥"></a>初窥</h1><p>到目前为止，我们都是以“使用者”的角色去使用一个开源项目。<br>通过以上的使用经验，我们是时候开始接触源码层面了。</p>
<ul>
<li>源码地址：<a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design/">https://github.com/ant-design/ant-design/</a></li>
</ul>
<p><img src="/post/antd-source/github.com_ant-design_ant-design_.png"></p>
<ul>
<li>红色：Code、Issuses、Pull requests —— 此代码项目的“代码”、“问题讨论”、“推拉请求”。</li>
<li>黄色：master是当前的分支，分支信息（目前有19个分支），标签信息(529个)；</li>
<li>绿色：“关于”，项目介绍、官网链接、开源许可协议，start、watch、forks等信息。</li>
<li>蓝色：releases信息，开源代码发布正式代码产生的信息。</li>
<li>咖啡箭头：Octotree——一个浏览器插件，可树形结构显示Github项目。</li>
</ul>
<p><strong>当前查看的代码是默认分支（master，由仓库设置）的代码，想查看其他分支的代码，可以在master那个改变分支名。</strong></p>
<p>在此页面滚动下来的<a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design#readme">README.md</a>，是根目录下的<code>README.md</code>文件，一般也是些文档资料；<br>关于文档资料，看中文还是英文的，个人建议是：<strong>原则是看原文的，即——国内项目看中文，国外项目看英文。</strong></p>
<h2 id="获取源码"><a href="#获取源码" class="headerlink" title="获取源码"></a>获取源码</h2><p>现在我们要clone源码，点击上图的绿色按钮“Code”，有三种方式Clone代码，最通用的是使用HTTPS方式，红色箭头点击可直接复制url。</p>
<p><em>不一定要clone源码到本地，有时候我们只是想简单看看源码的几个文件，并不需要全盘分析整个项目。有三个工具，都可以很方便查阅代码。</em></p>
<ol>
<li><a target="_blank" rel="noopener" href="https://www.octotree.io/">Octotree</a>——下载对应的浏览器插件，简单配置好github auth token，即可在浏览器左侧使用</li>
<li><a target="_blank" rel="noopener" href="https://github.com/conwnet/github1s">github1s</a>——直接在浏览器地址栏github后面加上1s即可：<a target="_blank" rel="noopener" href="https://github/">https://github</a><span style="color:red">1s</span>.com&#x2F;ant-design&#x2F;ant-design&#x2F;</li>
<li><a target="_blank" rel="noopener" href="https://github.com/github/dev">github dev</a>——直接在浏览器地址栏.com换成.dev即可：<a target="_blank" rel="noopener" href="https://github/">https://github</a><span style="color:red">.dev</span>&#x2F;ant-design&#x2F;ant-design&#x2F;</li>
</ol>
<p><img src="/post/antd-source/github.com_ant-design_ant-design_clone.png"></p>
<p>clone下来后，当前的分支(branch)是默认分支，建议是把HEAD切换到最新的release那份代码，这里的最新release是<a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design/releases/tag/4.21.7">4.21.7</a>。也是此章节蓝框点进去的链接。<br><strong>如果是业务项目出问题了，对项目依赖库进行问题排查，建议切换到项目实际使用的版本。</strong></p>
<p><img src="/post/antd-source/github.com_ant-design_ant-design_release_2.png"></p>
<ul>
<li>绿：这次的发布是从master发布的</li>
<li>红：此次发布的代码标签</li>
<li>蓝：此次发布的代码提交id</li>
</ul>
<p><em>antd的源码仓库1G+，实在太大了，如果真的clone不来，可以去release页面，翻到最下面的“Source Code”选择压缩包下载；代价就是失去git管理的信息。</em></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> $ <span class="token function">git</span> clone https://github.com/ant-design/ant-design.git
Cloning into <span class="token string">'ant-design'</span><span class="token punctuation">..</span>.
remote: Enumerating objects: <span class="token number">341830</span>, done.
remote: Counting objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">892</span>/892<span class="token punctuation">)</span>, done.
remote: Compressing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">626</span>/626<span class="token punctuation">)</span>, done.
remote: Total <span class="token number">341830</span> <span class="token punctuation">(</span>delta <span class="token number">396</span><span class="token punctuation">)</span>, reused <span class="token number">546</span> <span class="token punctuation">(</span>delta <span class="token number">191</span><span class="token punctuation">)</span>, pack-reused <span class="token number">340938</span>
Receiving objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">341830</span>/341830<span class="token punctuation">)</span>, <span class="token number">937.73</span> MiB <span class="token operator">|</span> <span class="token number">3.88</span> MiB/s, done.
Resolving deltas: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">227846</span>/227846<span class="token punctuation">)</span>, done.

<span class="token operator">></span> $ <span class="token builtin class-name">cd</span> ant-design

<span class="token operator">></span> $ <span class="token function">git</span> reset <span class="token parameter variable">--hard</span> 10b153f

<span class="token operator">></span> $ <span class="token function">git</span> checkout <span class="token parameter variable">-b</span> v4.21.7
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>重置HEAD到最新release的commit，并切出一条新的分支<code>v4.21.7</code></p>
<h2 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h2><p>软件工程领域中，版本的问题就跟软件名字一样重要，不同的小版本，也会有一些微小的区别，强烈建议版本要完全匹配；<br>由于官网一般用的是最新发布的文档，所以我们在上一步，获取的是最新release的版本，已经完成了匹配。</p>
<p>这里顺便看看github仓库的分支、tag信息——<a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design/branches">Branches · ant-design&#x2F;ant-design</a><br><img src="/post/antd-source/github.com_ant-design_ant-design_branch.png"></p>
<h2 id="根目录分析"><a href="#根目录分析" class="headerlink" title="根目录分析"></a>根目录分析</h2><p>现在开始正式分析源码，首先看项目根目录。<br>根目录有很多东西，这里按照一个比较通用的分类。<br>对根路径下的目录文件进行简单介绍，先不看文件&#x2F;目录的具体内容。<br>文件&#x2F;目录的命名，一般特定的文件都有约定俗成的名称。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 项目工程</span>

<span class="token comment">## git/github</span>
.git
.github
.gitignore
.gitpod.yml
.husky

<span class="token comment">## docker</span>
.dockerignore
Dockerfile.ui-test
docker-compose.yml

<span class="token comment">## 项目配置</span>
.editorconfig
.npmignore
tsconfig.json
webpack.config.js
package.json
renovate.json
index-style-only.js
index-with-locales.js

<span class="token comment">## 代码格式</span>
.eslintignore
.eslintrc.js
.prettierignore
.prettierrc
.stylelintrc.json

<span class="token comment">## 测试相关</span>
.jest.image.js
.jest.js
.jest.node.js
.jest.site.js
jest-puppeteer.config.js

<span class="token comment">## 其他</span>
.codesandbox
.depslintrc.js
.remarkrc.js

<span class="token comment"># 文档类</span>
AUTHORS.txt
CHANGELOG.en-US.md
CHANGELOG.zh-CN.md
CNAME
CODE_OF_CONDUCT.md
LICENSE
README-ja_JP.md
README-pt_BR.md
README-sp_MX.md
README-uk_UA.md
README-zh_CN.md
SECURITY.md

<span class="token comment"># 代码入口文件</span>
index.js

<span class="token comment"># 目录</span>
components
docs
tests
typings
scripts
site<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>我们大概知道了根路径下的这些文件是什么东西，但是还有一小部分不知道，有些东西并不重要，可以忽略之；<br>比如以上的项目工程-&gt;git、github、docker、测试、代码格式相关，对于antd的实现没有太大的关系，不建议细看。</p>
<h2 id="项目起点"><a href="#项目起点" class="headerlink" title="项目起点"></a>项目起点</h2><p>根目录有两个很重要的文件——<code>pckage.json</code>、<code>index.js</code>，后者很有可能是整个项目的启动文件，但是我们目前还无法确定，现在就要来验证一下是否为项目的启动文件。</p>
<p>熟悉前端开发的小伙伴应该都明白<code>package.json</code>的重要性；<br>每个现代前端项目，都会有<code>package.json</code>；<br>里面的信息都是项目级别的元信息；<br>这是最重要的文件了，我愿称之为项目起点文件。</p>
<p>打开常用的编辑器，检阅大致内容，关注以下配置；</p>
<ul>
<li><code>bin</code> 命令行相关，引用的文件会被添加到PATH。</li>
<li><code>scripts</code> 定义了一组可以运行的 node 脚本。</li>
<li><code>dependencies</code> 设置了作为依赖安装的 <code>npm</code> 软件包的列表。</li>
<li><code>devDependencies</code> 设置了作为开发依赖安装的 <code>npm</code> 软件包的列表。</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://nodejs.cn/learn/the-package-json-guide">package.json 指南</a></p>
<p> <code>scripts</code> 中常用<code>start</code>、<code>dev</code>、server等关键字来启动项目，重点关注这几个字眼；<br> <code>dependencies</code>、  <code>devDependencies</code> 可以知晓项目的一级依赖，大<br> 概知道其技术栈；</p>
<p>其实当我们看到<code>package.json</code>就应该下意识去安装依赖。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> $ <span class="token function">npm</span> i

<span class="token comment"># 省略掉npm的输出信息</span>

<span class="token operator">></span> antd@4.21.7 prepare
<span class="token operator">></span> husky <span class="token function">install</span>

husky - Git hooks installed

added <span class="token number">3655</span> packages <span class="token keyword">in</span> 7m
 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>根目录会出现两个新玩意：</p>
<ol>
<li><code>package-lock.json</code>——此项目的依赖的所有npm包，亦理解为描述node_modules的目录树文件（比<code>package.json</code>的<code>dependencies</code>更强大，可以在这个文件查看所有、层级依赖）</li>
<li><code>node_modules</code>——项目依赖包</li>
</ol>
<h1 id="启动项目"><a href="#启动项目" class="headerlink" title="启动项目"></a>启动项目</h1><p>环境信息：</p>
<ul>
<li>操作系统—— macOs v12.4</li>
<li>node —— v14.19.3</li>
<li>npm —— v8.12.1</li>
</ul>
<p><code>package.json</code>中的第93行，”start”中调用了<code>antd-tools</code>这个东西，但是我们并不知道这个东西是从哪来的。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">&#123;</span>
  <span class="token punctuation">..</span>.
  <span class="token string">"script"</span><span class="token builtin class-name">:</span> <span class="token punctuation">&#123;</span>
    <span class="token string">"start"</span><span class="token builtin class-name">:</span> <span class="token string">"antd-tools run clean &amp;&amp; cross-env NODE_ENV=development concurrently <span class="token entity" title="\&quot;">\"</span>bisheng start -c ./site/bisheng.config.js<span class="token entity" title="\&quot;">\"</span>"</span>,
  <span class="token punctuation">&#125;</span>
  <span class="token punctuation">..</span>.
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>node的可执行文件，都会放在<code>node_modules/.bin</code>下面，所有我们要查看这个目录。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> $ <span class="token function">ls</span> node_modules/.bin
<span class="token comment">## 太多东西了，省略掉输出信息</span>

<span class="token operator">></span> $ <span class="token function">ls</span> <span class="token parameter variable">-l</span> node_modules/.bin <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">'antd-tools'</span>
antd-tools -<span class="token operator">></span> <span class="token punctuation">..</span>/@ant-design/tools/bin/antd-tools.js
antd-tools-run -<span class="token operator">></span> <span class="token punctuation">..</span>/@ant-design/tools/bin/antd-tools-run.js
<span class="token comment"># node_modules/.bin/antd-tools是一个软链接，指向 node_modules/@ant-design/tools/bin/antd-tools.js</span>

<span class="token operator">></span> $ <span class="token function">cat</span> node_modules/@ant-design/tools/package.json
<span class="token punctuation">&#123;</span>
  <span class="token string">"name"</span><span class="token builtin class-name">:</span> <span class="token string">"@ant-design/tools"</span>,
  <span class="token punctuation">..</span>.
  <span class="token string">"homepage"</span><span class="token builtin class-name">:</span> <span class="token string">"http://github.com/ant-design/antd-tools"</span>,
  <span class="token punctuation">..</span>.
  <span class="token string">"bin"</span><span class="token builtin class-name">:</span> <span class="token punctuation">&#123;</span>
    <span class="token string">"antd-tools"</span><span class="token builtin class-name">:</span> <span class="token string">"./bin/antd-tools.js"</span>,
    <span class="token string">"antd-tools-run"</span><span class="token builtin class-name">:</span> <span class="token string">"./bin/antd-tools-run.js"</span>
  <span class="token punctuation">&#125;</span>
  <span class="token punctuation">..</span>.
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>通过<code>node_modules/@ant-design/tools/package.json</code>，我们得知了：</p>
<ul>
<li><code>antd-tools</code>这个命令是由”@ant-design&#x2F;tools”提供的</li>
<li>“@ant-design&#x2F;tools”还提供了<code>antd-tools-run</code>命令行</li>
<li>首页<a target="_blank" rel="noopener" href="http://github.com/ant-design/antd-tools">http://github.com/ant-design/antd-tools</a></li>
</ul>
<p><em>点开”homepage”，就是能看到@ant-design&#x2F;tools的源码了；如果去分析其代码实现，我们的关注点就变了，所以这里建议看完README.md等一些文档资料马上关闭掉这个网页。</em></p>
<p>package的script&#x3D;&gt;start配置很长，我们需要分成几个部分看看：</p>
<ol>
<li>antd-tools run clean</li>
<li>cross-env NODE_ENV&#x3D;development</li>
<li>concurrently</li>
<li>bisheng start -c .&#x2F;site&#x2F;bisheng.config.js</li>
</ol>
<p>还是用刚才的方法，从<code>node_modules/.bin</code>查看命令行由哪个依赖包提供，查看依赖包的<code>package.json</code>，从<code>homepage</code>找到一些资料，关于这个依赖包的说明。</p>
<p>当然，知道了包名（<code>node_modes</code>下的目录都是包名）也可以直接去<a target="_blank" rel="noopener" href="https://www.npmjs.com/">npm官网</a>查找这个包的资料。<br>如<code>node_moudles/@ant-design/tools/</code> &#x3D;&gt; <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/@ant-design/tools">https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;@ant-design&#x2F;tools</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> $ ll node_modules/.bin <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-E</span> <span class="token string">'antd-tools | cross-env | concurrently | bisheng'</span> 

antd-tools -<span class="token operator">></span> <span class="token punctuation">..</span>/@ant-design/tools/bin/antd-tools.js
bisheng -<span class="token operator">></span> <span class="token punctuation">..</span>/bisheng/bin/bisheng
concurrently -<span class="token operator">></span> <span class="token punctuation">..</span>/concurrently/dist/bin/concurrently.js
cross-env -<span class="token operator">></span> <span class="token punctuation">..</span>/cross-env/src/bin/cross-env.js<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>结论是：</p>
<ol>
<li>antd-tools —— 专门为antd开发的cli工具</li>
<li>bisheng —— 将Mardown转换成用React构建的静态网站</li>
<li>concurrently —— 同时运行多个命令</li>
<li>cross-env —— 跨平台设置环境变量</li>
</ol>
<p>所以一条简单的<code>npm start</code>，至少使用了4个依赖包……<br>那就先启动项目吧。</p>
<p>Antd官网的贡献指南- <a target="_blank" rel="noopener" href="https://ant.design/docs/react/contributing-cn#%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B">开发流程</a>章节也有对重要script命令简单介绍。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> $ <span class="token function">npm</span> start

<span class="token operator">></span> antd@4.21.7 prestart
<span class="token operator">></span> <span class="token function">npm</span> run version


<span class="token operator">></span> antd@4.21.7 version
<span class="token operator">></span> <span class="token function">node</span> ./scripts/generate-version


<span class="token operator">></span> antd@4.21.7 start
<span class="token operator">></span> antd-tools run clean <span class="token operator">&amp;&amp;</span> cross-env <span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>development concurrently <span class="token string">"bisheng start -c ./site/bisheng.config.js"</span>

antd-tools run clean
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> ℹ Compiling 🚚  Bisheng
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> ℹ ｢wds｣: Project is running at http://localhost:8001/
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> ℹ ｢wds｣: webpack output is served from undefined
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> ℹ ｢wds｣: Content not from webpack is served from /Users/wu/Documents/code/ant-design/_site
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> ℹ ｢wds｣: 404s will fallback to /index.html
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> ✔ 🚚  Bisheng: Compiled successfully <span class="token keyword">in</span> <span class="token number">55</span>.77s
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  DONE  Compiled successfully <span class="token keyword">in</span> 55766ms11:51:08 AM
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> 
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  WAIT  Compiling<span class="token punctuation">..</span>.11:51:09 AM
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> 
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> ℹ Compiling 🚚  Bisheng
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> ✔ 🚚  Bisheng: Compiled successfully <span class="token keyword">in</span> <span class="token number">801</span>.56ms
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  DONE  Compiled successfully <span class="token keyword">in</span> 804ms11:51:11 AM
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> 
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>以上的输出信息都比较重要，建议自行翻译理解。</strong></p>
<p>两次“DONE”之后，浏览器上<a target="_blank" rel="noopener" href="http://localhost:8001/%E5%B0%B1%E8%83%BD%E7%9C%8B%E5%88%B0%E5%90%AF%E5%8A%A8%E7%9A%84%E5%AE%98%E7%BD%91%E3%80%82">http://localhost:8001/就能看到启动的官网。</a><br><strong>所以npm start其实是启动了一个官网项目的网站。</strong><br>这个官网由bisheng（毕升）驱动的，bisheng的指定了配置文件。<br><code>site/bisheng.config.js</code>，<code>npm start</code>使用了这个配置文件；<br>我们也应该打开看看，<a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design/blob/10b153f65de6eb5a18107a3c88db18c8aaeade07/site/bisheng.config.js#">35～41行</a>有<code>source</code>的配置；<br>得去bisheng的REAMD.md看看有没有关于配置文件<code>source</code>的资料;<br><a target="_blank" rel="noopener" href="https://github.com/benjycui/bisheng#source-string--arraystring--object-category-string--arraystring">source</a>是存放Markdown文件的配置，官网提供的是字符串例子；<br>可是antd却使用了对象方式去配置，遗憾的是没找到对象配置的例子。<br>不再研究bisheng的配置，继续看bisheng的配置文件；</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">source: <span class="token punctuation">&#123;</span>
  components: <span class="token string">'./components'</span>,
  docs: <span class="token string">'./docs'</span>,
  changelog: <span class="token punctuation">[</span><span class="token string">'CHANGELOG.zh-CN.md'</span>, <span class="token string">'CHANGELOG.en-US.md'</span><span class="token punctuation">]</span>,
  <span class="token string">'components/form/v3'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">'components/form/v3.zh-CN.md'</span>, <span class="token string">'components/form/v3.en-US.md'</span><span class="token punctuation">]</span>,
  <span class="token string">'docs/resources'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">'./docs/resources.zh-CN.md'</span>, <span class="token string">'./docs/resources.en-US.md'</span><span class="token punctuation">]</span>,
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>changelog、’components&#x2F;form&#x2F;v3’、’docs&#x2F;resources’，都是配置的是MarkDown文件路径，<br>都扫一眼，发现没啥特殊是，只是网站组成的页面一部分；<br>docs&#x2F;components都是目录，先看看目录有什么东西；</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> $ <span class="token function">ls</span> docs/ components/

components:
<span class="token comment">## 省略输出</span>

docs/:
react              resources.en-US.md resources.zh-CN.md spec<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>components下有个我们熟悉的<code>index.tsx</code>，<a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design/blob/10b153f65d/acomponents/index.tsx">components&#x2F;index.tsx</a><br>这个模块导出了很多组件，组件名都能跟官网的<a target="_blank" rel="noopener" href="http://localhost:8001/components/overview-cn/">组件总览</a>一一对应<br>可以得知这个文件时组件的入口文件；<br>我们用最简单的<code>Button</code>示例， <a target="_blank" rel="noopener" href="http://localhost:8001/components/button-cn/">http://localhost:8001/components/button-cn/</a><br>这个页面有“按钮用于开始一个即时操作。”的文本，用vscode全局搜索，得知这段话来源于——<br><a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design/blob/10b153f65d/components/button/index.zh-CN.md">components&#x2F;button&#x2F;index.zh-CN.md</a> ，试着修改这段文本，在本地的官网项目查看效果。</p>
<p><img src="/post/antd-source/github.com_ant-design_ant-design_button_1.png"></p>
<p>然而页面下面的“代码演示”的源码内容并没有包含在此文件里；<br>通过bisheng的主题配置去找“生成规则”太浪费时间了（还是得注意我们的关注点在antd，其他都不关注）；<br>用VScode搜索<code>Primary Button</code>字段，尝试修改<a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design/blob/10b153f65d/components/button/demo/basic.md">components&#x2F;button&#x2F;demo&#x2F;basic.md</a></p>
<p><img src="/post/antd-source/ant.design_button.png"></p>
<p>小结：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design/blob/10b153f65d/acomponents/index.tsx">components&#x2F;index.tsx</a> 组件的总入口文件</li>
<li><code>components/[name]</code> 一个目录对应一个组件</li>
<li><code>components/[name]/index.tsx</code> 组件模块级别的入口文件，导出组件级别模块</li>
<li><code>components/[name]/index.zh-CN.md</code> 组件页面入口文件</li>
<li><code>components/[name]/demo</code> 组件页面入口“代码示例”</li>
</ol>
<h2 id="调试代码"><a href="#调试代码" class="headerlink" title="调试代码"></a>调试代码</h2><ol>
<li>console.log</li>
<li>浏览器断点调试</li>
<li>源码断点调试</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/nodejs/reactjs-tutorial#_debugging-react">React JavaScript Tutorial in Visual Studio Code</a></p>
<h2 id="包别名"><a href="#包别名" class="headerlink" title="包别名"></a>包别名</h2><p><a target="_blank" rel="noopener" href="https://docs.npmjs.com/cli/v6/commands/npm-link">npm-link | npm Docs</a></p>
<h1 id="体系家族"><a href="#体系家族" class="headerlink" title="体系家族"></a>体系家族</h1><p>Ant Desigin有很庞大的体系，通过之前的阅读源码我们触及到了其体系下的多个npm包——“@ant-design&#x2F;tools”、<code>rc-\*</code>组件，还有官网footer下的一些相关资源推荐。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://charts.ant.design/">Ant Design Charts</a></li>
<li><a target="_blank" rel="noopener" href="https://pro.ant.design/">Ant Design Pro</a></li>
<li><a target="_blank" rel="noopener" href="https://procomponents.ant.design/">Ant Design Pro Components</a></li>
<li><a target="_blank" rel="noopener" href="https://mobile.ant.design/">Ant Design Mobile</a></li>
<li><a target="_blank" rel="noopener" href="https://landing.ant.design/">Ant Design Landing</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/websemantics/awesome-ant-design">Awesome Ant Design</a></li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/ant-design">Ant Design Team · GitHub</a></p>
<h1 id="初心"><a href="#初心" class="headerlink" title="初心"></a>初心</h1><p>分析开源项目是一件比较费时费力的事情，我们在开始分析代码前，最好确定一下为什么要分析源码，以及真的有必要吗。</p>
<ul>
<li>学习优秀的同类项目</li>
<li>使用开源项目过程中报错，定位bug是否在此项目</li>
<li>技术调研（成本偏高）</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>screw-hand
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://screw-hand.com/post/antd-source/" title="antd源码浅析">https://screw-hand.com/post/antd-source/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="followme">
  <span>欢迎关注我的其它发布渠道</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>


        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/post/%E3%80%8AJavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%EF%BC%88%E7%AC%AC4%E7%89%88%EF%BC%89%E3%80%8B/" rel="prev" title="《JavaScript高级程序设计（第4版）》的笔记">
                  <i class="fa fa-chevron-left"></i> 《JavaScript高级程序设计（第4版）》的笔记
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/post/hope/" rel="next" title="你的理想生活">
                  你的理想生活 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2019 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">screw-hand</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/screw-hand" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.8/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/fancybox.js"></script>



  




<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"screw-hand","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

</body>
</html>
